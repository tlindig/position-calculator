/*!
 * class PositionCalculator
 * https://github.com/tlindig/position-calculator
 *
 * Copyright (c) 2014 Tobias Lindig
 * Licensed under the MIT license.
 */(function(h){typeof define=="function"&&define.amd?define("position-calculator",["jquery"],h):typeof module=="object"&&module.exports?module.exports=h:jQuery.PositionCalculator=h(jQuery)})(function(h){"use strict";var T=window,p=document,a=p.documentElement,E=/top|middle|bottom/,W=/left|center|right/,c=/%$/,g={left:"right",center:"center",right:"left",top:"bottom",middle:"middle",bottom:"top"};function d(i){return typeof i=="string"&&(i==="window"?i=T:i==="document"&&(i=p)),i}function y(i){var t=i.split(" ");return{y:E.test(t[0])?t[0]:"top",x:W.test(t[1])?t[1]:"left"}}function v(i,t){return i===t?!0:!i||!t?!1:i.top===t.top&&i.left===t.left&&i.height===t.height&&i.width===t.width}function m(i){var t=i[0];if(t.nodeType===9)return{width:i.outerWidth(),height:i.outerHeight(),top:0,left:0};if(h.isWindow(t))return{width:i.outerWidth(),height:i.outerHeight(),top:i.scrollTop(),left:i.scrollLeft()};if(t.preventDefault)return{width:0,height:0,top:t.pageY,left:t.pageX};var r=i.offset();return{width:i.outerWidth(),height:i.outerHeight(),top:r.top,left:r.left}}function b(i,t){var r=i[0];if(r.nodeType!==9){if(h.isWindow(r)&&(t.top=i.scrollTop(),t.left=i.scrollLeft()),r.preventDefault){t.top=r.pageY,t.left=r.pageX;return}var e=i.offset();t.top=e.top,t.left=e.left}}function j(i){var t=i[0],r;return t.nodeType===9?(t=a,r={top:0,left:0}):h.isWindow(t)?(t=a,r={top:i.scrollTop(),left:i.scrollLeft()}):r=i.offset(),{width:t.clientWidth,height:t.clientHeight,top:r.top+t.clientTop,left:r.left+t.clientLeft}}function z(i,t){var r=i[0],e;r.nodeType===9?(r=a,e={top:0,left:0}):h.isWindow(r)?(r=a,e={top:i.scrollTop(),left:i.scrollLeft()}):e=i.offset(),t.top=e.top+r.clientTop,t.left=e.left+r.clientLeft}function x(i,t){return{y:parseFloat(i.y)*(c.test(i.y)?t.height/100:1),x:parseFloat(i.x)*(c.test(i.x)?t.width/100:1),mirror:i.mirror}}function _(i,t,r){var e={top:0,left:0,middle:i.height*.5,center:i.width*.5,bottom:i.height,right:i.width};return t.y!==0&&(e.middle+=t.y,t.mirror?(e.top+=r.y!=="top"?t.y*-1:t.y,e.bottom+=r.y!=="bottom"?t.y*-1:t.y):(e.top+=t.y,e.bottom+=t.y)),t.x!==0&&(e.center+=t.x,t.mirror?(e.left+=r.x!=="left"?t.x*-1:t.x,e.right+=r.x!=="right"?t.x*-1:t.x):(e.left+=t.x,e.right+=t.x)),e}function w(i){var t=[];return i.top>0&&t.push("top"),i.left>0&&t.push("left"),i.bottom<0&&t.push("bottom"),i.right<0&&t.push("right"),t.length?i.overflow=t:i.overflow=null,i}function A(i,t){var r={top:i.top-t.top,left:i.left-t.left,bottom:i.top+i.height-(t.top+t.height),right:i.left+i.width-(t.left+t.width),overflow:[]};return w(r)}function B(i,t,r,e){var o,l,n,f={y:t.y,x:t.x},u={y:r.y,x:r.x};if(e.overflow.indexOf("top")!==-1&&(o="top"),e.overflow.indexOf("bottom")!==-1&&(o?o=null:o="bottom"),e.overflow.indexOf("left")!==-1&&(l="left"),e.overflow.indexOf("right")!==-1&&(l?l=null:l="right"),!o&&!l)return null;switch(i=i===!0?"both":i,n=0,i){case"item":n=1;break;case"target":n=2;break;case"both":n=3;break}return n&1&&(o&&(f.y=g[f.y]),l&&(f.x=g[f.x])),n&2&&(o&&(u.y=g[u.y]),l&&(u.x=g[u.x])),{item_at:f,tar_at:u}}function k(i,t,r){var e,o,l,n,f;return r?f=["top","bottom"]:f=["left","right"],e=i[f[0]],l=t[f[0]],o=i[f[1]]*-1,n=t[f[1]]*-1,e<0&&(e=0),o<0&&(o=0),l<0&&(l=0),n<0&&(n=0),e<0&&o<0?!0:l<0&&n<0?!1:e+o<l+n}function L(i,t){t==="all"&&(t=!0);var r=i.distance.overflow;if(!r.length)return i;for(var e=!1,o=!1,l,n,f=r.length-1;f>=0;f--)switch(l=r[f],l){case"top":case"bottom":(!o&&t===!0||t.indexOf(l)!==-1)&&(n=i.distance[l],i.moveBy.y+=n,i.distance.top-=n,i.distance.bottom-=n,o=!0);break;case"left":case"right":(!e&&t===!0||t.indexOf(l)!==-1)&&(n=i.distance[l],i.moveBy.x+=n,i.distance.left-=n,i.distance.right-=n,e=!0);break}return w(i.distance),i}function s(i){if(!(this instanceof s))return new s(i);this.options=this.$itm=this.$trg=this.$bnd=this.itmAt=this.trgAt=this.itmPos=this.trgPos=this.bndPos=this.itmOffset=this.trgOffset=null,this._init(i)}return s.prototype._init=function(i){var t=this.options=h.extend({},s.defaults,i);return!t.item||(this.$itm=t.item.jquery?t.item:h(t.item),this.$itm.length===0)?null:(this.$trg=t.target&&t.target.jquery?t.target:h(d(t.target)),this.$bnd=t.boundary&&t.boundary.jquery?t.boundary:h(d(t.boundary)),this.itmAt=y(t.itemAt),this.trgAt=y(t.targetAt),this.resize(),this)},s.prototype.resize=function(){var i=this.options,t=m(this.$itm),r=this.$trg.length?m(this.$trg):null;if(this.bndPos=this.$bnd.length?j(this.$bnd):null,!this.itmPos||!v(t,this.itmPos)){this.itmPos=t;var e=x(i.itemOffset,t);e.x=e.x*-1,e.y=e.y*-1,this.itmOffset=_(t,e,this.itmAt)}return(!this.trgPos||!v(r,this.trgPos))&&(this.trgPos=r,r&&(this.trgOffset=_(r,x(i.targetOffset,r),this.trgAt))),this},s.prototype.calcVariant=function(i,t){var r={moveBy:null,distance:null,itemAt:null,targetAt:null};if(this.trgPos&&i&&t){var e={top:this.trgPos.top+this.trgOffset[t.y],left:this.trgPos.left+this.trgOffset[t.x]},o={top:e.top-this.itmOffset[i.y],left:e.left-this.itmOffset[i.x],height:this.itmPos.height,width:this.itmPos.width};r.moveBy={y:o.top-this.itmPos.top,x:o.left-this.itmPos.left},r.distance=this.bndPos?A(this.bndPos,o):null,r.itemAt=i.y+" "+i.x,r.targetAt=t.y+" "+t.x}else r.moveBy={y:0,x:0},r.distance=this.bndPos?A(this.bndPos,this.itmPos):null;return r},s.prototype.calculate=function(){if(this.itmPos===null)return null;var i=this.options;b(this.$itm,this.itmPos),this.trgPos&&b(this.$trg,this.trgPos),this.bndPos&&z(this.$bnd,this.bndPos);var t=this.calcVariant(this.itmAt,this.trgAt);if(!t.distance||!t.distance.overflow)return t;if(i.flip&&i.flip!=="none"&&this.trgPos){var r,e=B(i.flip,this.itmAt,this.trgAt,t.distance);if(e){if(r=this.calcVariant(e.item_at,e.tar_at),!r.distance.overflow)return r;var o={y:!1,x:!1};if(o.y=k(r.distance,t.distance,!0),o.x=k(r.distance,t.distance,!1),o.y!==o.x){if(t=this.calcVariant({y:o.y?e.item_at.y:this.itmAt.y,x:o.x?e.item_at.x:this.itmAt.x},{y:o.y?e.tar_at.y:this.trgAt.y,x:o.x?e.tar_at.x:this.trgAt.x}),!t.distance.overflow)return t}else o.y&&o.x&&(t=r)}}return i.stick&&i.stick!=="none"?L(t,i.stick):t},s.defaults={item:null,target:null,boundary:window,itemAt:"top left",targetAt:"top left",itemOffset:{y:0,x:0,mirror:!0},targetOffset:{y:0,x:0,mirror:!0},flip:"none",stick:"none"},s});
//# sourceMappingURL=position-calculator.min.js.map
